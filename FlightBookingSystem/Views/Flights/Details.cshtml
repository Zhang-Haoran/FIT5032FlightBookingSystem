@model FlightBookingSystem.Models.Flights

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    /* Always set the map height explicitly to define the size of the div
        * element that contains the map. */
    #map {
        height: 400px;
        width: 400px;
    }
    /* Optional: Makes the sample page fill the window. */
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
</style>

<div class="panel panel-default">
    <div class="panel-heading">
        <h4>Flights Details</h4>
    </div>
    <div class="panel-body">
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.departure)
            </dt>

            <dd id="travelFrom">
                @Html.DisplayFor(model => model.departure)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.departureDate)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.departureDate)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.destination)
            </dt>

            <dd id="travelTo">
                @Html.DisplayFor(model => model.destination)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.arrivalDate)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.arrivalDate)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.flightNumber)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.flightNumber)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.totalSeats)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.totalSeats)
            </dd>

        </dl>
        @*<div id="map-canvas"></div>
            <div id="textboxContainer" style="width:100%; height:40px; top:0; position:absolute;">
                From : <input type="text" name="travelFrom" id="travelFrom"> &nbsp; To : <input type="text" name="travelTo" id="travelTo" onBlur="getRoute()">
            </div>*@
        <div id="map"></div>
    </div>
    <p>
        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "btn btn-warning" })
        @Html.ActionLink("Back to List", "Index", "", new { @class = "btn btn-success" })
    </p>

</div>
<script>
    function myFunction() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng("-34.397", "150.644");
        var mapOption = {
            zoom: 15,
            center: latlng
        }
        map = new google.maps.Map(document.getElementById("map"), mapOption);
        codeAddress();
    }

    function codeAddress() {
        var from_latlng, to_latlng;
        var address1 = document.getElementById("travelFrom").textContent;

        var address2 = document.getElementById("travelTo").textContent;



        geocoder.geocode({ "address": address1 }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {

                from_latlng = results[0].geometry.location;
     
            }
            else {
                alert("geocode was not successful because" + status);
            }
        });
        geocoder.geocode({ "address": address2 }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                to_latlng = results[0].geometry.location;
            }
            else {
                alert("geocode was not successful because" + status);
            }
        });


        var flightPlanCoordinates = [
               new google.maps.LatLng(from_latlng),
               new google.maps.LatLng(to_latlng)
        ];
        var flightPath = new google.maps.Polyline({
            path: flightPlanCoordinates,
            geodesic: true,
            strokeColor: '#FF0000',
            strokeOpacity: 1.0,
            strokeWeight: 2
        });

        flightPath.setMap(map);
    }




</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWDodbWDP0gwQTVe0_1R3WSAn8fsq7lQQ&callback=myFunction"
        type="text/javascript"></script>
